<!DOCTYPE html><html lang="en" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Getting Started With Passwordless Authentication | Jackson Bates</title><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Getting Started With Passwordless Authentication" /><meta name="author" content="Jackson Bates" /><meta property="og:locale" content="en_US" /><meta name="description" content="A simple guide to implementing passwordless authentication for a NodeJS, Express, Mongo app with email auth tokens" /><meta property="og:description" content="A simple guide to implementing passwordless authentication for a NodeJS, Express, Mongo app with email auth tokens" /><link rel="canonical" href="https://blog.jacksonbates.com/passwordless" /><meta property="og:url" content="https://blog.jacksonbates.com/passwordless" /><meta property="og:site_name" content="Jackson Bates" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2016-09-20T13:33:00+10:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Getting Started With Passwordless Authentication" /><meta name="twitter:site" content="@JacksonBates" /><meta name="twitter:creator" content="@Jackson Bates" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"headline":"Getting Started With Passwordless Authentication","dateModified":"2016-09-20T13:33:00+10:00","description":"A simple guide to implementing passwordless authentication for a NodeJS, Express, Mongo app with email auth tokens","datePublished":"2016-09-20T13:33:00+10:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.jacksonbates.com/passwordless"},"url":"https://blog.jacksonbates.com/passwordless","author":{"@type":"Person","name":"Jackson Bates"},"@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --> <script src="/assets/js/post.min.js" async></script> <script src="/app.js" defer></script><link rel="alternate" type="application/atom+xml" title="Jackson Bates" href="/atom.xml" /><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><nav id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/minimized_headshot.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><h1 class="site-title"> <a href="/">Jackson Bates</a></h1><div class="site-subtitle font-italic"></div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/archive/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVE</span> </a></li></ul></nav><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <!-- Switch the mode between dark and light. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightkMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightkMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/jacksonbates" target="_blank" > <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/JacksonBates" target="_blank" > <i class="fab fa-twitter"></i> </a> <a href=" javascript:window.open('mailto:' + ['blog','jacksonbates.com'].join('@'))" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" > <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Getting Started With Passwordless Authentication</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div></div></div><div id="main-wrapper"><div id="main"> <!-- Refactor the HTML structure. --> <!-- Suroundding the markdown table with '<div class="table-wrapper">. and '</div>' --> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><article class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Getting Started With Passwordless Authentication</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Sep 20, 2016, 1:33 PM +1000" > Sep 20, 2016 <i class="unloaded">2016-09-20T13:33:00+10:00</i> </span> by <span class="author"> Jackson Bates </span></div><script> document.addEventListener("DOMContentLoaded", (event) => { var wordcount = document.querySelector('.post').innerText.split(' ').length; var minutes = Math.round(wordcount / 300); var unit = ' minutes.'; if (minutes === 1) { unit = ' minute.' } document.getElementById('readingTime').innerText = 'Reading Time: ' + minutes + unit; }); </script><div id='readingTime'></div></div><div class="post-content"><p>You may have heard that there are <a href="https://www.freecodecamp.org/news/360-million-reasons-to-destroy-all-passwords-9a100b2b5001/">360 Million Reasons to Destroy All Passwords</a> and that <a href="https://medium.com/@ninjudd/passwords-are-obsolete-9ed56d483eb">Passwords are Obsolete</a>. But that doesn’t really help you actually make a passwordless authentication system, does it?</p><p>Doing authentication well can be hard and fraught with potential security traps. The good news is that there are some lovely little JavaScript libraries that can do some of that heavy lifting for us. And they provide lots of code snippets to help us get started.</p><p>So, here’s the skinny on how I implemented a passwordless authentication system in my recent Free Code Camp Voting App project.</p><p>Before we get started, note that you’ll need a working knowledge of Node.js and npm.</p><h2 id="what-youll-need">What you’ll need:</h2><ul><li>A passwordless authentication library: Passwordless</li><li>An email library: EmailJS</li><li>A new, single purpose email address: Microsoft Outlook (don’t worry — I’ll explain later)</li><li>A ‘Can-Do’ attitude and nimble copy-pasta fingers</li></ul><h2 id="lets-get-started">Let’s get started!</h2><ul><li>Register your single purpose email address</li><li>Pick the most professional and meaningful name for the account you can think of.</li></ul><p>For example, since my app was called “Pollz,” I registered the email address pollz.tokendelivery@outlook.com. This way I communicate to the recipient that it’s a single purpose email address related to the app they just tried to sign into.</p><p>Note that it’s better to send from a ‘proper’ domain if you own one, but this tutorial assumes you want something quick and dirty up and running to test the concept.</p><p>You may need to take a few extra steps like verifying your account before it will let you send emails automatically via your app. So if things don’t work later on, check the inbox for any messages from Outlook and follow their advice.</p><h2 id="install-and-require-the-node-modules">Install and Require the Node Modules</h2><p>From the terminal install the following npm packages:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c1">// Add 'sudo' at the beginning if you need it!</span>
<span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span> <span class="nx">passwordless</span>
<span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span> <span class="nx">passwordless</span><span class="o">-</span><span class="nx">mongostore</span>
<span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span> <span class="nx">emailjs</span>
</pre></table></code></div></div><p>That installs the base requirements. You’ll also be using other crucial Node libraries, which you may already have installed for your project. If not, install these, too:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span> <span class="nx">express</span><span class="o">-</span><span class="nx">sessions</span>
<span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span> <span class="nx">body</span><span class="o">-</span><span class="nx">parser</span>
<span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span> <span class="nx">cookie</span><span class="o">-</span><span class="nx">parser</span>
</pre></table></code></div></div><p>Now, assuming you have a separate server.js and routes.js file, include the following in the top of the appropriate files. If you don’t have separate files, you can mush them all together and smother them in delicious spaghetti sauce:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c1">// Note: Don't forget all the other modules you usually include!</span>
<span class="c1">// (Express, Mongo etc...)</span>

<span class="c1">// server.js</span>
<span class="kd">var</span> <span class="nx">cookieParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">cookie-parser</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">expressSession</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">express-session</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">passwordless</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">passwordless</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">MongoStore</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">passwordless-mongostore</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">email</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">emailjs</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// -------------------------------------------------- //</span>
<span class="c1">// routes.js</span>
<span class="kd">var</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">body-parser</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">urlencodedParser</span> <span class="o">=</span> <span class="nx">bodyParser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
<span class="kd">var</span> <span class="nx">passwordless</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">passwordless</span><span class="dl">"</span><span class="p">);</span>
</pre></table></code></div></div><h2 id="set-up-delivery">Set up delivery</h2><p>Next, in the server.js file, we will include the code snippet that handles sending the authentication tokens to our users:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="c1">// server.js</span>
<span class="kd">var</span> <span class="nx">yourEmail</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">pollz.tokendelivery@outlook.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">yourPwd</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">OUTLOOK_PASSWORD</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">yourSmtp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">smtp-mail.outlook.com</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">smtpServer</span> <span class="o">=</span> <span class="nx">email</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">connect</span><span class="p">({</span>
  <span class="na">user</span><span class="p">:</span> <span class="nx">yourEmail</span><span class="p">,</span>
  <span class="na">password</span><span class="p">:</span> <span class="nx">yourPwd</span><span class="p">,</span>
  <span class="na">timeout</span><span class="p">:</span> <span class="mi">60000</span><span class="p">,</span>
  <span class="na">host</span><span class="p">:</span> <span class="nx">yourSmtp</span><span class="p">,</span>
  <span class="na">tls</span><span class="p">:</span> <span class="p">{</span> <span class="na">ciphers</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SSLv3</span><span class="dl">"</span> <span class="p">},</span>
<span class="p">});</span>
<span class="c1">// MongoDB setup (given default can be used)</span>
<span class="kd">var</span> <span class="nx">pathToMongoDb</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span>
<span class="c1">// Path to be send via email</span>
<span class="kd">var</span> <span class="nx">host</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://pollz.herokuapp.com/</span><span class="dl">"</span><span class="p">;</span>
</pre></table></code></div></div><p>The above code is making some assumptions you need to know about.</p><p>Firstly, change the value of the ‘yourEmail’ variable to the new address you set up.</p><p>Secondly, the ‘yourPwd’ variable you see there doesn’t mean my password is the super-obscure ‘process.env.OUTLOOK_PASSWORD’, nor does it mean you should go ahead and just put your password in there.</p><p>‘process.env.***’ is used to access environment variables in Node. Basically, you can hard code those variables in your local system in a ‘dotenv’ file, or in Heroku via the settings for your app, and then refer to them as above. This means you’re not committing sensitive information to public GitHub repositories for all to see. It’s a little outside the scope of this tutorial, but the fine manual can tell you more: process.env.</p><p>The ‘pathToMongoDB’ URL you see there is the same MongoDB path I use to connect to Mongo elsewhere in my app. If you’ve connected to Mongo, you can use the same url again.</p><p>Be sure to change the ‘host’ URL to your own app’s URL.</p><h2 id="configure-passwordless">Configure Passwordless</h2><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="c1">// server.js</span>
<span class="c1">// Setup of Passwordless</span>
<span class="nx">passwordless</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="k">new</span> <span class="nx">MongoStore</span><span class="p">(</span><span class="nx">pathToMongoDb</span><span class="p">));</span>
<span class="nx">passwordless</span><span class="p">.</span><span class="nx">addDelivery</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span>
  <span class="nx">tokenToSend</span><span class="p">,</span>
  <span class="nx">uidToSend</span><span class="p">,</span>
  <span class="nx">recipient</span><span class="p">,</span>
  <span class="nx">callback</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Send out token</span>
  <span class="nx">smtpServer</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span>
    <span class="p">{</span>
      <span class="na">text</span><span class="p">:</span>
        <span class="dl">"</span><span class="s2">Hello!</span><span class="se">\n</span><span class="s2">You can now access your account here:</span><span class="dl">"</span> <span class="o">+</span>
        <span class="nx">host</span> <span class="o">+</span>
        <span class="dl">"</span><span class="s2">?token=</span><span class="dl">"</span> <span class="o">+</span>
        <span class="nx">tokenToSend</span> <span class="o">+</span>
        <span class="dl">"</span><span class="s2">&amp;uid=</span><span class="dl">"</span> <span class="o">+</span>
        <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">uidToSend</span><span class="p">),</span>
      <span class="na">from</span><span class="p">:</span> <span class="nx">yourEmail</span><span class="p">,</span>
      <span class="na">to</span><span class="p">:</span> <span class="nx">recipient</span><span class="p">,</span>
      <span class="na">subject</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Token for </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">host</span><span class="p">,</span>
      <span class="na">attachment</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="na">data</span><span class="p">:</span> <span class="dl">"</span><span class="s2">&lt;html&gt;INSERT HTML STRING LINKING TO TOKEN&lt;/html&gt;</span><span class="dl">"</span><span class="p">,</span>
          <span class="na">alternative</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">],</span>
    <span class="p">},</span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">);</span>
<span class="p">});</span>
</pre></table></code></div></div><p>Scary code-block, right? But not complete gibberish, I hope.</p><p>There’s two things happening here:</p><ul><li>Initializing Passwordless, and setting a store for the tokens.</li><li>Adding a delivery mechanism and building what the email will contain.</li></ul><p>Read it closely and it should make sense. Beware that you include the appropriate number of closing parentheses and curly braces. I burned 45 minutes on that very issue last night on my latest app. Not kidding.</p><h2 id="get-your-middleware-in-place">Get your middleware in place</h2><p>Middleware is like underwear: forgetting it can lead to discomfort, but putting it on in the wrong order can lead to embarrassment.</p><p>You may already have included this more generic Express middleware, but if not, you need to:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1">// server.js</span>
<span class="c1">// Standard express setup</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cookieParser</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>
  <span class="nx">expressSession</span><span class="p">({</span>
    <span class="na">secret</span><span class="p">:</span> <span class="dl">"</span><span class="s2">quincylarsonisaprinceamongmen</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">saveUninitialized</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">resave</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">cookie</span><span class="p">:</span> <span class="p">{</span> <span class="na">maxAge</span><span class="p">:</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">365</span> <span class="o">*</span> <span class="mi">10</span> <span class="p">},</span>
  <span class="p">})</span>
<span class="p">);</span>
</pre></table></code></div></div><p>Then the particular middleware you need for passwordless can be included like this:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c1">// server.js</span>
<span class="c1">// Passwordless middleware</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">passwordless</span><span class="p">.</span><span class="nx">sessionSupport</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">passwordless</span><span class="p">.</span><span class="nx">acceptToken</span><span class="p">({</span> <span class="na">successRedirect</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/</span><span class="dl">"</span> <span class="p">}));</span>
</pre></table></code></div></div><p>I put all this immediately after the Passwordless initialization snippets, and include the ‘standard’ middleware before the ‘passwordless’ middleware. ‘sessionSupport’ depends on ‘expressSession’, so the order matters. Anything else leads to chafing.</p><h2 id="set-up-some-test-routes">Set up some test routes</h2><p>There are only a few essential routes. We need to let users log in and log out, and there needs to be a way to differentiate restricted pages from public pages for non-authenticated users.</p><p>Note: This portion assumes you have set up the Express Router for your app.</p><p>Login:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="c1">// routes.js</span>
<span class="c1">// GET /login</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/login</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="dl">"</span><span class="s2">login</span><span class="dl">"</span><span class="p">);</span>
<span class="p">});</span>
<span class="c1">// POST /sendtoken</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span>
  <span class="dl">"</span><span class="s2">/sendtoken</span><span class="dl">"</span><span class="p">,</span>
  <span class="nx">urlencodedParser</span><span class="p">,</span>
  <span class="nx">passwordless</span><span class="p">.</span><span class="nx">requestToken</span><span class="p">(</span>
    <span class="c1">// Simply accept every user*</span>
    <span class="kd">function</span> <span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="nx">delivery</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">user</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">),</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="dl">"</span><span class="s2">pages/sent</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">user</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">user</span> <span class="p">});</span>
  <span class="p">}</span>
<span class="p">);</span>
</pre></table></code></div></div><p>In the POST request above, we’re using the simplest and fastest mechanism for logging someone in. You are more likely to want to use the email address that is passed from the login form (we’ll see that in a minute) to look for the user in your database, or create a new one. You can see the more detailed method for that in the Passwordless documentation.</p><p>The POST request includes the ‘urlencodedParser’ variable we set earlier. We do this so that we can read the form data, but we only apply it to this specific route. You can read more about this security consideration here: Dangerous Use Of Body Parser. A special thanks to Jeremy for this tip!</p><p>Notice also in that POST request, the ‘sent’ page renders with a ‘user’ email address being passed in. This is accessible in the views templates and can be used and passed around as necessary. We’ll be using an EJS nav bar to demonstrate that soon.</p><p>Logout:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c1">// routes.js</span>
<span class="c1">// GET logout</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/logout</span><span class="dl">"</span><span class="p">,</span> <span class="nx">passwordless</span><span class="p">.</span><span class="nx">logout</span><span class="p">(),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">);</span>
<span class="p">});</span>
</pre></table></code></div></div><p>You hopefully noticed that this simple GET request takes an extra argument nestled snugly between the URL endpoint and the callback function that processes the request. This ‘passwordless.logout()’ method does all the behind the scenes work necessary to promptly forget the user.</p><p>Restricted pages:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1">// routes.js</span>
<span class="c1">// GET restricted site</span>
<span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span>
  <span class="dl">"</span><span class="s2">/restricted</span><span class="dl">"</span><span class="p">,</span>
  <span class="nx">passwordless</span><span class="p">.</span><span class="nx">restricted</span><span class="p">({</span>
    <span class="na">failureRedirect</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/login</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">}),</span>
  <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="dl">"</span><span class="s2">pages/restricted</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">user</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">user</span> <span class="p">});</span>
  <span class="p">}</span>
<span class="p">);</span>
</pre></table></code></div></div><p>The format for restricted pages is pretty easy to parse, too. Similar to the logout pattern, we have the route, ‘/restricted’, followed by the ‘passwordless.restricted()’ method, followed by the callback function that processes the HTTP request. The difference here is that ‘passwordless.restricted()’ takes an object as an argument that specifies the endpoint we redirect to if the user is not authenticated.</p><h2 id="views">Views</h2><p>One of the most important views in this tutorial is the humble login page. Set it up how you like, but include this form to request the email address of your user:</p><div class="language-html highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c">&lt;!-- views/pages/login.ejs --&gt;</span>
<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/sendtoken"</span> <span class="na">method=</span><span class="s">"POST"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-field"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"user"</span><span class="nt">&gt;</span>Email<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"user"</span> <span class="na">type=</span><span class="s">"email"</span> <span class="na">aria-required=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Login / Register"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></table></code></div></div><p>We’re running out of time. Style it on your own dime.</p><p>It is important that you have included the ‘body-parser’ middleware mentioned earlier in order for you to be able to handle the data POSTed from this form.</p><p>A final view worth looking at would be one that incorporates the authenticated user value we saw up in the routes section.</p><p>Here’s an example of a really simple nav bar that changes according to whether the user is authenticated or not:</p><div class="language-html highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c">&lt;!-- views/partials/navbar.ejs --&gt;</span>
<span class="nt">&lt;nav&gt;</span>
  <span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;</span><span class="err">%</span> <span class="na">if</span><span class="err">(</span><span class="na">user</span><span class="err">)</span> <span class="err">{</span> <span class="err">%</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;</span>Hi, <span class="nt">&lt;</span><span class="err">%=</span> <span class="na">user</span> <span class="err">%</span><span class="nt">&gt;</span>!<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"/logout"</span><span class="nt">&gt;</span>(logout)<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;</span><span class="err">%</span> <span class="err">}</span> <span class="na">else</span> <span class="err">{</span> <span class="err">%</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"/login"</span><span class="nt">&gt;</span>Login<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;</span><span class="err">%</span> <span class="err">}</span> <span class="err">%</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</pre></table></code></div></div><p>If you’re unfamiliar with EJS syntax, it’s the reason for the weird ‘&lt;% %&gt;’ tags in the markup. I have used 4 space indentation for the HTML, but allowed the EJS tags to sit in their own 2 space indentation so you can see them more easily. Aren’t I good to you?</p><p>The markup above can be parsed in English as ‘If there is a user, print a list item that says “Hi, <username>!” and another list item that lets them log out; otherwise only show a list item with a login link’.</username></p><h2 id="and-thats-it-but-theres-more">And that’s it. But there’s more…</h2><p>That’s all you need to know to get up and running with Passwordless authentication.</p><p>There are some caveats to be aware of:</p><p>Outlook is a little slow. I haven’t narrowed the cause down precisely, but I believe it is due to the TLS ‘SSLv3’ cipher Outlook requires. I’m no expert, but that’s my best guess. That’s also why I recommend setting an absurdly long ‘timeout’ in the email config section (I picked 60 seconds).</p><p>Why not use Gmail, then? A good question, and it was the first thing I tried. My emailjs script kept failing once I pushed the app to Heroku, but the Heroku logs weren’t providing much detail. It simply said I was making a ‘bad request.’ A little poking around on the internet suggested that maybe Google might be waiting for me to register my app with them and pay for the privilege. I did not do that. I just jumped ship to Outlook instead.</p><p>Is there a better service than Outlook, then? If you have you own domain and the ability to configure the DNS records for it, you should try SparkPost and the SparkPost node client library. It’s a little more grunt work, but it’s nice and fast, and they send you a laptop sticker if you can successfully send an email through them. I’m using it in my latest app. It’s aces.</p><p>So there you have it, there is no excuse for you to ever ask your users for their passwords ever again!</p><hr /><p>If you have any questions or comments, ping me on Twitter: <a href="https://twitter.com/jacksonbates"> @JacksonBates</a>. If you liked this post, you can <a href="https://twitter.com/intent/tweet?url=https://blog.jacksonbates.com/passwordless&amp;text=Getting Started With Passwordless Authentication&amp;via=jacksonbates" target="_blank"> share it</a>!</p></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/authentication/" class="post-tag no-text-decoration">authentication</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Getting Started With Passwordless Authentication - Jackson Bates&url=https://blog.jacksonbates.com/passwordless" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Getting Started With Passwordless Authentication - Jackson Bates&u=https://blog.jacksonbates.com/passwordless" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Getting Started With Passwordless Authentication - Jackson Bates&url=https://blog.jacksonbates.com/passwordless" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/post-mortem/">post mortem</a> <a class="post-tag" href="/tags/laravel/">laravel</a> <a class="post-tag" href="/tags/inherited-codebase-diaries/">inherited codebase diaries</a> <a class="post-tag" href="/tags/career/">career</a> <a class="post-tag" href="/tags/tips/">tips</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/musings/">musings</a> <a class="post-tag" href="/tags/mentoring/">mentoring</a> <a class="post-tag" href="/tags/databases/">databases</a> <a class="post-tag" href="/tags/twitter/">twitter</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/optus-router-hack-dns"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Jun 5 <i class="unloaded">2021-06-05T21:30:00+10:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hacking an Optus Sagemcom F@ST3864V2 router to change DNS settings</h3><div class="text-muted small"><p> I’ve recently installed a Pi-Hole on my home network. In order to set this up you need to change the DNS settings for your router to try to route everything through the Pi-Hole. On most routers, t...</p></div></div></a></div><div class="card"> <a href="/laravel-routes-bug"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Mar 17 <i class="unloaded">2021-03-17T13:30:00+11:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Unhelpful Laravel Bug | Undefined offset: 0</h3><div class="text-muted small"><p> Some time wasted on a silly mistake today. I received Undefined offset: 0 as an error response from my Laravel API. The API call and routes / controllers were identical to other attempts at someth...</p></div></div></a></div><div class="card"> <a href="/finding-a-mentor"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Nov 27, 2020 <i class="unloaded">2020-11-27T22:00:00+11:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to find a mentor</h3><div class="text-muted small"><p> There was an excellent discussion between Jason Lengstorf and Cassidy Williams hosted on the freeCodeCamp YouTube channel this week, and part of it (linked below) really resonated with me about men...</p></div></div></a></div></div></div><!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <span class="btn btn-outline-primary disabled"><p>-</p></span> <a href="/mocha-chai" class="btn btn-outline-primary"><p>Setting up a simple testing suite</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://jacksonbates.com">Jackson Bates</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a> theme.</p></div></div></footer><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/post-mortem/">post mortem</a> <a class="post-tag" href="/tags/laravel/">laravel</a> <a class="post-tag" href="/tags/inherited-codebase-diaries/">inherited codebase diaries</a> <a class="post-tag" href="/tags/career/">career</a> <a class="post-tag" href="/tags/tips/">tips</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/musings/">musings</a> <a class="post-tag" href="/tags/mentoring/">mentoring</a> <a class="post-tag" href="/tags/databases/">databases</a> <a class="post-tag" href="/tags/twitter/">twitter</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-178925242-1', 'auto'); ga('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://blog.jacksonbates.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
